% A = [1 1 1 1;2 3 1 5;-1 1 -5 3;3 1 7 -2]; % gauss
% b = [10; 31; -2; 18];


function lecture0428(A,b)
C = [A b];
n = length(b);
for i=1:n-1
    for k=i+1:n
        C(k,:) = -C(k,i)/C(i,i) * C(i,:)+C(k,:);
    end
end

A =C(:,1:n)
b =C(:,n+1)

x(n) = b(n)/A(n,n)
for k = n-1:-1:1
%     x(k) = (b(k)-A(k,2)*x(2)-A(k,3)*x(3)-A(k,4)*x(4))/A(k,k)-sum(A(k,k+1:n).*x(k+1:n))
    x(k) = (b(k)-sum(A(k,k+1:n).*(x(k+1:n))))/A(k,k)
end % 4.3 1,10번 , 4.2 5,컴 2,3
% x(4) = b(4)/A(4,4)
% x(3) = (b(3)-A(3,4)*x(4))/A(3,3)
% x(2) = (b(2)-A(2,3)*x(3)-A(2,4)*x(4))/A(2,2)
% x(1) = (b(1)-A(1,2)*x(2)-A(1,3)*x(3)-A(1,4)*x(4))/A(1,1)



% C(2,:) = -C(2,1)./C(1,1)*C(1,:)+C(2,:);
% C(3,:) = -C(3,1)./C(1,1)*C(1,:)+C(3,:);
% C(4,:) = -C(4,1)./C(1,1)*C(1,:)+C(4,:);
% 
% C(3,:) = -C(3,2)./C(2,2)*C(2,:)+C(3,:);
% C(4,:) = -C(4,2)./C(2,2)*C(2,:)+C(4,:);
% 
% C(4,:) = -C(4,3)./C(3,3)*C(3,:)+C(4,:);